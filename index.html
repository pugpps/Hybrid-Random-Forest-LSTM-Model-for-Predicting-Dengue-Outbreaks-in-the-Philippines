<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dengue Forecasting Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    body {
        font-family: "Segoe UI", Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #eef2f7;
    }

    .container {
        background: white;
        max-width: 950px;
        margin: 40px auto;
        padding: 35px;
        border-radius: 14px;
        box-shadow: 0 6px 25px rgba(0,0,0,0.1);
    }

    h2 {
        margin-top: 0;
        color: #1c3d70;
    }

    canvas {
        margin-top: 20px;
        background: #ffffff;
        border-radius: 8px;
        padding: 10px;
    }

    .metric-box {
        background: #f4f7fb;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 5px solid #1c3d70;
    }

    .section-title {
        margin-top: 35px;
        color: #1c3d70;
        font-weight: bold;
        border-left: 4px solid #1c3d70;
        padding-left: 10px;
    }

    .highlight {
        font-weight: bold;
        color: #0a7c25;
    }
</style>
</head>

<body>
<div class="container">
    <h2>ðŸ¦Ÿ Dengue Forecasting Dashboard</h2>

    <h3 class="section-title">ðŸ“Š Actual vs Predicted</h3>
    <canvas id="chart_actual_pred"></canvas>

    <h3 class="section-title">ðŸ“Œ Model Accuracy</h3>
    <div id="accuracy" class="metric-box"></div>

    <h3 class="section-title">ðŸ”® Forecast (Next 4 Months)</h3>
    <canvas id="chart_forecast"></canvas>

    <div id="forecast_values" class="metric-box"></div>
</div>

<script>
// Load JSON automatically
fetch("dengue_dashboard_output.json")
    .then(response => response.json())
    .then(data => {

        // ============================
        // Chart 1 â€” Actual vs Predicted
        // ============================
        new Chart(document.getElementById("chart_actual_pred"), {
            type: "line",
            data: {
                labels: data.dates,
                datasets: [
                    { 
                        label: "Actual Cases", 
                        data: data.actual_cases, 
                        borderColor: "#1c3d70", 
                        borderWidth: 2,
                        tension: 0.3
                    },
                    { 
                        label: "Predicted Cases", 
                        data: data.lstm_training_pred, 
                        borderColor: "#e67e22", 
                        borderWidth: 2,
                        tension: 0.3
                    }
                ]
            }
        });

        // ============================
        // Accuracy Display
        // ============================
        document.getElementById("accuracy").innerHTML =
            `<b>Random Forest Accuracy (RÂ²):</b> <span class="highlight">${(data.rf_accuracy_r2 * 100).toFixed(2)}%</span><br>
             <b>LSTM Accuracy (RÂ²):</b> <span class="highlight">${(data.lstm_accuracy_r2 * 100).toFixed(2)}%</span>`;

        // ============================
        // Forecast Chart
        // ============================
        new Chart(document.getElementById("chart_forecast"), {
            type: "line",
            data: {
                labels: data.future_forecast_dates,
                datasets: [
                    {
                        label: "Forecast (Next 4 Months)",
                        data: data.future_forecast_values,
                        borderColor: "#0a7c25",
                        borderWidth: 2,
                        tension: 0.4
                    }
                ]
            }
        });

        // ============================
        // Forecast values text
        // ============================
        let f_html = "<b>Predicted Dengue Cases:</b><br><br>";
        data.future_forecast_dates.forEach((d, i) => {
            f_html += `${d}: <span class='highlight'>${Math.round(data.future_forecast_values[i])}</span><br>`;
        });

        document.getElementById("forecast_values").innerHTML = f_html;
    })
    .catch(error => {
        console.error("Error loading JSON:", error);
        document.body.innerHTML += "<p style='color:red'>Failed to load dashboard_output.json</p>";
    });
</script>

</body>
</html>
